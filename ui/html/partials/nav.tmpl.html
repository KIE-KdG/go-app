{{define "nav"}}
<nav>
  <div class="navbar bg-base-100">
    <div class="navbar-start">
      {{template "drawerButton"}}
      {{template "logo" .}}

    </div>

    <div class="flex-none">
      <!-- Navigation Links -->
      <ul class="menu menu-horizontal px-1">
        <li>
          <a href="/">Chat</a>
        </li>
        <li>
          <a href="/map">Map</a>
        </li>
        <li>
          <a href="/panel">Panel</a>
        </li>
      </ul>
    </div>

    <div class="navbar-end mx-auto flex items-center">
      <!-- Theme Toggle -->
      <input type="checkbox" id="theme-toggle" value="waaterweg-dark" class="toggle theme-controller"
        onchange="toggleTheme(this)">
      <script>
        // Function to update theme and save the choice in localStorage
        function toggleTheme(element) {
          if (element.checked) {
            document.documentElement.setAttribute('data-theme', element.value);
            localStorage.setItem('theme', element.value);
          } else {
            document.documentElement.setAttribute('data-theme', 'waaterweg');
            localStorage.setItem('theme', 'waaterweg');
          }
        }
        // Set the toggle state based on the saved theme when the page loads
        document.addEventListener('DOMContentLoaded', function () {
          const savedTheme = localStorage.getItem('theme') || 'waaterweg';
          if (savedTheme === 'waaterweg-dark') {
            document.getElementById('theme-toggle').checked = true;
          }
          document.documentElement.setAttribute('data-theme', savedTheme);
        });
      </script>
      <div>
        {{if .IsAuthenticated}}
        <form action='/user/logout' method='POST' class="btn btn-secondary">
          <input type='hidden' name='csrf_token' value='{{.CSRFToken}}'>
          <button>Logout</button>
        </form>
        {{else}}
        <a href='/user/signup' class="btn btn-secondary">Signup</a>
        <a href='/user/login' class="btn btn-secondary">Login</a>
        {{end}}
      </div>
    </div>
  </div>
</nav>
{{end}}